(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,86909,e=>{"use strict";e.s(["createChildProfile",()=>a,"getCurrentUser",()=>t,"hasCompletedOnboarding",()=>i,"signInWithGoogle",()=>l,"signUpParent",()=>s]);var r=e.i(7471);async function t(){try{let{data:{user:e},error:t}=await r.supabase.auth.getUser();if(t||!e)return null;let{data:s,error:a}=await r.supabase.from("profiles").select("*").eq("id",e.id).single();if(a)return console.error("Error fetching profile:",a),null;let l=[];if((null==s?void 0:s.role)==="parent"){let{data:t,error:s}=await r.supabase.from("children").select("*").eq("parent_id",e.id).order("created_at",{ascending:!0});!s&&t&&(l=t)}return{id:e.id,email:e.email||"",profile:s,children:l}}catch(e){return console.error("Error getting current user:",e),null}}async function s(e,t,s){try{let{data:a,error:l}=await r.supabase.auth.signUp({email:e,password:t,options:{data:{full_name:s,role:"parent"}}});if(l)throw l;return{data:a,error:null}}catch(e){return console.error("Error signing up parent:",e),{data:null,error:e}}}async function a(e,t,s){try{let{data:a,error:l}=await r.supabase.from("children").insert({parent_id:e,name:t,age:s,tier:s<=7?"magic_workshop":s<=12?"innovation_lab":"professional_studio"}).select().single();if(l)throw l;return{data:a,error:null}}catch(e){return console.error("Error creating child profile:",e),{data:null,error:e}}}async function l(){try{let{error:e}=await r.supabase.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});if(e)throw e;return{error:null}}catch(e){return console.error("Error signing in with Google:",e),{error:e}}}async function i(e){try{let{data:t,error:s}=await r.supabase.from("profiles").select("onboarding_completed").eq("id",e).single();if(s||!t)return!1;return t.onboarding_completed||!1}catch(e){return console.error("Error checking onboarding status:",e),!1}}},7471,e=>{"use strict";e.s(["supabase",()=>r]);let r=(0,e.i(24632).createClient)("https://ylymepybqcykyomsmxwk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlseW1lcHlicWN5a3lvbXNteHdrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgwMTY1NTUsImV4cCI6MjA3MzU5MjU1NX0.6nM69WteOtBz6lqbDycwZce9aXJco0f6VTXOagXxOhY",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}})},75254,e=>{"use strict";e.s(["default",()=>i],75254);var r=e.i(71645);let t=e=>{let r=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,t)=>t?t.toUpperCase():r.toLowerCase());return r.charAt(0).toUpperCase()+r.slice(1)},s=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim()};var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,r.forwardRef)((e,t)=>{let{color:l="currentColor",size:i=24,strokeWidth:n=2,absoluteStrokeWidth:o,className:d="",children:c,iconNode:u,...h}=e;return(0,r.createElement)("svg",{ref:t,...a,width:i,height:i,stroke:l,strokeWidth:o?24*Number(n)/Number(i):n,className:s("lucide",d),...!c&&!(e=>{for(let r in e)if(r.startsWith("aria-")||"role"===r||"title"===r)return!0})(h)&&{"aria-hidden":"true"},...h},[...u.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(c)?c:[c]])}),i=(e,a)=>{let i=(0,r.forwardRef)((i,n)=>{let{className:o,...d}=i;return(0,r.createElement)(l,{ref:n,iconNode:a,className:s("lucide-".concat(t(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),o),...d})});return i.displayName=t(e),i}},7233,27612,e=>{"use strict";e.s(["Plus",()=>t],7233);var r=e.i(75254);let t=(0,r.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Trash2",()=>s],27612);let s=(0,r.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},19488,e=>{"use strict";e.s(["default",()=>f],19488);var r=e.i(43476),t=e.i(71645);e.i(7471);var s=e.i(86909);let a=(0,t.createContext)(void 0);var l=e.i(19455),i=e.i(15288),n=e.i(7233),o=e.i(75254);let d=(0,o.default)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),c=(0,o.default)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]),u=(0,o.default)("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]),h=(0,o.default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),m=(0,o.default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),x=(0,o.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var p=e.i(27612);let g=(0,o.default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);function f(){var e,o,f;let{user:b,loading:j,refreshUser:y}=function(){let e=(0,t.useContext)(a);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}(),[v,N]=(0,t.useState)(!1),[w,C]=(0,t.useState)(""),[k,A]=(0,t.useState)(6),[M,T]=(0,t.useState)(!1),[I,_]=(0,t.useState)(""),z=async e=>{e.preventDefault(),T(!0),_("");try{if(!(null==b?void 0:b.id))throw Error("User not authenticated");let{error:e}=await (0,s.createChildProfile)(b.id,w.trim(),k);if(e)throw e;await y(),C(""),A(6),N(!1)}catch(e){_(e instanceof Error?e.message:"Failed to add child")}finally{T(!1)}},U=e=>{switch(e){case"magic_workshop":return{name:"Magic Workshop",description:"Ages 5-7 • Visual block coding with magical themes",color:"from-pink-500 to-purple-500",bgColor:"bg-pink-50",textColor:"text-pink-700"};case"innovation_lab":return{name:"Innovation Lab",description:"Ages 8-12 • Advanced blocks and app building",color:"from-blue-500 to-cyan-500",bgColor:"bg-blue-50",textColor:"text-blue-700"};case"professional_studio":return{name:"Professional Studio",description:"Ages 13+ • Real programming languages and tools",color:"from-green-500 to-emerald-500",bgColor:"bg-green-50",textColor:"text-green-700"};default:return{name:"Unknown Tier",description:"",color:"from-gray-500 to-gray-600",bgColor:"bg-gray-50",textColor:"text-gray-700"}}};return j?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-cyan-50 flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):b?(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-cyan-50",children:[(0,r.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome back, ",(null==(e=b.profile)?void 0:e.full_name)||"Parent","!"]}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage your children's coding journey"})]}),(0,r.jsx)("div",{className:"flex items-center space-x-4",children:(0,r.jsxs)(l.Button,{variant:"outline",className:"flex items-center",children:[(0,r.jsx)(d,{className:"w-4 h-4 mr-2"}),"Settings"]})})]})})}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[I&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,r.jsx)("p",{className:"text-red-700",children:I})}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Your Children"}),(0,r.jsxs)(l.Button,{onClick:()=>N(!0),className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",children:[(0,r.jsx)(n.Plus,{className:"w-4 h-4 mr-2"}),"Add Child"]})]}),(null==(o=b.children)?void 0:o.length)===0?(0,r.jsx)(i.Card,{className:"text-center py-12",children:(0,r.jsxs)(i.CardContent,{children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(n.Plus,{className:"w-8 h-8 text-purple-600"})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No children added yet"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Add your first child to get started with their coding journey"}),(0,r.jsx)(l.Button,{onClick:()=>N(!0),className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",children:"Add Your First Child"})]})}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:null==(f=b.children)?void 0:f.map(e=>{let t=U(e.tier);return(0,r.jsxs)(i.Card,{className:"hover:shadow-lg transition-shadow",children:[(0,r.jsx)(i.CardHeader,{className:"pb-3",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r ".concat(t.color," rounded-full flex items-center justify-center text-white font-bold text-lg"),children:e.name.charAt(0).toUpperCase()}),(0,r.jsxs)("div",{children:[(0,r.jsx)(i.CardTitle,{className:"text-lg",children:e.name}),(0,r.jsxs)(i.CardDescription,{children:["Age ",e.age]})]})]}),(0,r.jsxs)("div",{className:"flex space-x-1",children:[(0,r.jsx)(l.Button,{variant:"ghost",size:"sm",children:(0,r.jsx)(x,{className:"w-4 h-4"})}),(0,r.jsx)(l.Button,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700",children:(0,r.jsx)(p.Trash2,{className:"w-4 h-4"})})]})]})}),(0,r.jsxs)(i.CardContent,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"p-3 rounded-lg ".concat(t.bgColor),children:[(0,r.jsx)("h4",{className:"font-semibold ".concat(t.textColor),children:t.name}),(0,r.jsx)("p",{className:"text-sm ".concat(t.textColor," opacity-80"),children:t.description})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"flex items-center justify-center w-8 h-8 bg-blue-100 rounded-full mx-auto mb-1",children:(0,r.jsx)(c,{className:"w-4 h-4 text-blue-600"})}),(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:"12"}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:"Lessons"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"flex items-center justify-center w-8 h-8 bg-yellow-100 rounded-full mx-auto mb-1",children:(0,r.jsx)(u,{className:"w-4 h-4 text-yellow-600"})}),(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:"5"}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:"Badges"})]})]}),(0,r.jsxs)(l.Button,{className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",children:[(0,r.jsx)(g,{className:"w-4 h-4 mr-2"}),"Continue Learning"]})]})]},e.id)})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"Total Learning Time"}),(0,r.jsx)(h,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.CardContent,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:"24h 32m"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"+2h from last week"})]})]}),(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"Projects Created"}),(0,r.jsx)(m,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.CardContent,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:"8"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"+3 from last week"})]})]}),(0,r.jsxs)(i.Card,{children:[(0,r.jsxs)(i.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(i.CardTitle,{className:"text-sm font-medium",children:"Achievements"}),(0,r.jsx)(u,{className:"h-4 w-4 text-muted-foreground"})]}),(0,r.jsxs)(i.CardContent,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold",children:"15"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"+5 from last week"})]})]})]})]}),v&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,r.jsxs)(i.Card,{className:"w-full max-w-md",children:[(0,r.jsxs)(i.CardHeader,{children:[(0,r.jsx)(i.CardTitle,{children:"Add New Child"}),(0,r.jsx)(i.CardDescription,{children:"Create a profile for your child to start their coding journey"})]}),(0,r.jsx)(i.CardContent,{children:(0,r.jsxs)("form",{onSubmit:z,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Name"}),(0,r.jsx)("input",{type:"text",value:w,onChange:e=>C(e.target.value),placeholder:"Child's name",className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Age"}),(0,r.jsx)("select",{value:k,onChange:e=>A(parseInt(e.target.value)),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:Array.from({length:16},(e,r)=>r+3).map(e=>(0,r.jsxs)("option",{value:e,children:[e," years old"]},e))})]}),(0,r.jsx)("div",{className:"bg-purple-50 p-3 rounded-lg",children:(0,r.jsxs)("p",{className:"text-sm text-purple-700 font-medium",children:["Learning Tier: ",U(k<=7?"magic_workshop":k<=12?"innovation_lab":"professional_studio").name]})}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)(l.Button,{type:"button",variant:"outline",onClick:()=>N(!1),className:"flex-1",disabled:M,children:"Cancel"}),(0,r.jsx)(l.Button,{type:"submit",className:"flex-1 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",disabled:M,children:M?"Adding...":"Add Child"})]})]})})]})})]}):(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-cyan-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Please sign in to access your dashboard."})]})})}},713,e=>{e.n(e.i(19488))}]);