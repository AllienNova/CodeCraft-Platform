(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7471,e=>{"use strict";e.s(["supabase",()=>r]);let r=(0,e.i(24632).createClient)("https://ylymepybqcykyomsmxwk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlseW1lcHlicWN5a3lvbXNteHdrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgwMTY1NTUsImV4cCI6MjA3MzU5MjU1NX0.6nM69WteOtBz6lqbDycwZce9aXJco0f6VTXOagXxOhY",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}})},86909,e=>{"use strict";e.s(["createChildProfile",()=>a,"getCurrentUser",()=>t,"hasCompletedOnboarding",()=>s,"signInWithGoogle",()=>i,"signUpParent",()=>n]);var r=e.i(7471);async function t(){try{let{data:{user:e},error:t}=await r.supabase.auth.getUser();if(t||!e)return null;let{data:n,error:a}=await r.supabase.from("profiles").select("*").eq("id",e.id).single();if(a)return console.error("Error fetching profile:",a),null;let i=[];if((null==n?void 0:n.role)==="parent"){let{data:t,error:n}=await r.supabase.from("children").select("*").eq("parent_id",e.id).order("created_at",{ascending:!0});!n&&t&&(i=t)}return{id:e.id,email:e.email||"",profile:n,children:i}}catch(e){return console.error("Error getting current user:",e),null}}async function n(e,t,n){try{let{data:a,error:i}=await r.supabase.auth.signUp({email:e,password:t,options:{data:{full_name:n,role:"parent"}}});if(i)throw i;return{data:a,error:null}}catch(e){return console.error("Error signing up parent:",e),{data:null,error:e}}}async function a(e,t,n){try{let{data:a,error:i}=await r.supabase.from("children").insert({parent_id:e,name:t,age:n,tier:n<=7?"magic_workshop":n<=12?"innovation_lab":"professional_studio"}).select().single();if(i)throw i;return{data:a,error:null}}catch(e){return console.error("Error creating child profile:",e),{data:null,error:e}}}async function i(){try{let{error:e}=await r.supabase.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});if(e)throw e;return{error:null}}catch(e){return console.error("Error signing in with Google:",e),{error:e}}}async function s(e){try{let{data:t,error:n}=await r.supabase.from("profiles").select("onboarding_completed").eq("id",e).single();if(n||!t)return!1;return t.onboarding_completed||!1}catch(e){return console.error("Error checking onboarding status:",e),!1}}},53795,e=>{"use strict";e.s(["default",()=>s]);var r=e.i(43476),t=e.i(71645),n=e.i(18566),a=e.i(7471),i=e.i(86909);function s(){let[e,s]=(0,t.useState)(!0),[l,o]=(0,t.useState)(""),c=(0,n.useRouter)();return((0,t.useEffect)(()=>{(async()=>{try{var e;let{data:r,error:t}=await a.supabase.auth.getSession();if(t){console.error("Auth callback error:",t),o("Authentication failed. Please try again.");return}(null==(e=r.session)?void 0:e.user)?await (0,i.hasCompletedOnboarding)(r.session.user.id)?c.push("/dashboard"):c.push("/onboarding"):c.push("/auth/signin")}catch(e){console.error("Unexpected error in auth callback:",e),o("An unexpected error occurred. Please try again.")}finally{s(!1)}})()},[c]),l)?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-cyan-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("span",{className:"text-red-600 text-2xl",children:"⚠️"})}),(0,r.jsx)("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Authentication Error"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:l}),(0,r.jsx)("button",{onClick:()=>c.push("/auth/signin"),className:"w-full bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors",children:"Try Again"})]})}):(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-cyan-50 flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}),(0,r.jsx)("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Completing Sign In"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Please wait while we set up your account..."})]})})}}]);