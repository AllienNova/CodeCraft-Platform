module.exports=[10849,a=>{"use strict";a.s(["supabase",()=>b]);let b=(0,a.i(40422).createClient)("https://ylymepybqcykyomsmxwk.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlseW1lcHlicWN5a3lvbXNteHdrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgwMTY1NTUsImV4cCI6MjA3MzU5MjU1NX0.6nM69WteOtBz6lqbDycwZce9aXJco0f6VTXOagXxOhY",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}})},63672,a=>{"use strict";a.s(["createChildProfile",()=>d,"hasCompletedOnboarding",()=>f,"signInWithGoogle",()=>e,"signUpParent",()=>c]);var b=a.i(10849);async function c(a,c,d){try{let{data:e,error:f}=await b.supabase.auth.signUp({email:a,password:c,options:{data:{full_name:d,role:"parent"}}});if(f)throw f;return{data:e,error:null}}catch(a){return console.error("Error signing up parent:",a),{data:null,error:a}}}async function d(a,c,d){try{let{data:e,error:f}=await b.supabase.from("children").insert({parent_id:a,name:c,age:d,tier:d<=7?"magic_workshop":d<=12?"innovation_lab":"professional_studio"}).select().single();if(f)throw f;return{data:e,error:null}}catch(a){return console.error("Error creating child profile:",a),{data:null,error:a}}}async function e(){try{let{error:a}=await b.supabase.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/auth/callback`}});if(a)throw a;return{error:null}}catch(a){return console.error("Error signing in with Google:",a),{error:a}}}async function f(a){try{let{data:c,error:d}=await b.supabase.from("profiles").select("onboarding_completed").eq("id",a).single();if(d||!c)return!1;return c.onboarding_completed||!1}catch(a){return console.error("Error checking onboarding status:",a),!1}}},76450,a=>{"use strict";a.s(["default",()=>g]);var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(10849),f=a.i(63672);function g(){let[a,g]=(0,c.useState)(!0),[h,i]=(0,c.useState)(""),j=(0,d.useRouter)();return((0,c.useEffect)(()=>{(async()=>{try{let{data:a,error:b}=await e.supabase.auth.getSession();if(b){console.error("Auth callback error:",b),i("Authentication failed. Please try again.");return}a.session?.user?await (0,f.hasCompletedOnboarding)(a.session.user.id)?j.push("/dashboard"):j.push("/onboarding"):j.push("/auth/signin")}catch(a){console.error("Unexpected error in auth callback:",a),i("An unexpected error occurred. Please try again.")}finally{g(!1)}})()},[j]),h)?(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-cyan-50 flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)("span",{className:"text-red-600 text-2xl",children:"⚠️"})}),(0,b.jsx)("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Authentication Error"}),(0,b.jsx)("p",{className:"text-gray-600 mb-6",children:h}),(0,b.jsx)("button",{onClick:()=>j.push("/auth/signin"),className:"w-full bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 transition-colors",children:"Try Again"})]})}):(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-blue-50 to-cyan-50 flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}),(0,b.jsx)("h1",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Completing Sign In"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Please wait while we set up your account..."})]})})}}];

//# sourceMappingURL=src_9c024f3b._.js.map